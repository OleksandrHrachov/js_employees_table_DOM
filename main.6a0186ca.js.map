{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","table","tableBody","tableHead","rowList","rows","getNumber","string","str","i","length","isNaN","pushNotification","posTop","posRight","title","description","type","message","createElement","setAttribute","classList","add","innerHTML","style","top","right","append","setTimeout","display","prevClick","addEventListener","e","headCol","target","index","querySelectorAll","findIndex","item","innerText","sort","a","b","aElem","cells","bElem","localeCompare","reverse","row","activeRow","closest","forEach","remove","toggle","form","formInputs","deletePreviousMessage","dataValidator","columnHeader","newValueFromInput","targetCell","cellInput","test","Intl","NumberFormat","format","insertAdjacentHTML","sel","preventDefault","selectedValue","value","data","FormData","entries","nameNewEmp","position","age","salary","office","checkSum","newEmployeeRow","insertAdjacentElement","prevTargetInner","cellIndex","trim","ev","key"],"mappings":"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","file":"main.6a0186ca.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\nconst table = document.querySelector('table');\nconst tableBody = document.querySelector('tbody');\nconst tableHead = table.querySelector('thead');\nlet rowList = [...tableBody.rows];\n\n/* получение числа из строки */\n\nfunction getNumber(string) {\n  let str = '';\n\n  for (let i = 0; i <= string.length; i++) {\n    if (!isNaN(+string[i])) {\n      str += string[i];\n    }\n  }\n\n  return +str;\n}\n\n/* создание и вставка сообщения */\n\nconst pushNotification = (posTop, posRight, title, description, type) => {\n  const message = document.createElement('div');\n\n  message.setAttribute('data-qa', 'notification');\n\n  message.classList.add('notification');\n  message.classList.add(type);\n\n  message.innerHTML = `\n    <h2 class='title'>${title}</h2>\n    <p>${description}</p>\n  `;\n\n  message.style.top = `${posTop}px`;\n  message.style.right = `${posRight}px`;\n\n  body.append(message);\n\n  setTimeout(() => {\n    message.style.display = 'none';\n  }, 5000);\n};\n\n/* сортировка таблицы */\n\nlet prevClick = '';\n\ntableHead.addEventListener('click', e => {\n  const headCol = e.target;\n\n  if (!headCol) {\n    return;\n  }\n\n  const index = [...document.querySelectorAll('th')].findIndex(\n    item => item.innerText === headCol.innerText);\n\n  switch (headCol.innerText) {\n    case 'Name':\n      if (prevClick !== headCol.innerText) {\n        prevClick = headCol.innerText;\n\n        rowList = [...tableBody.rows].sort((a, b) => {\n          const aElem = a.cells[index].innerText;\n          const bElem = b.cells[index].innerText;\n\n          return aElem.localeCompare(bElem);\n        });\n      } else if (prevClick === headCol.innerText) {\n        prevClick = '';\n\n        rowList.reverse();\n      }\n      break;\n\n    case 'Position':\n      if (prevClick !== headCol.innerText) {\n        prevClick = headCol.innerText;\n\n        rowList = [...tableBody.rows].sort((a, b) => {\n          const aElem = a.cells[index].innerText;\n          const bElem = b.cells[index].innerText;\n\n          return aElem.localeCompare(bElem);\n        });\n      } else if (prevClick === headCol.innerText) {\n        prevClick = '';\n\n        rowList.reverse();\n      }\n      break;\n\n    case 'Office':\n      if (prevClick !== headCol.innerText) {\n        prevClick = headCol.innerText;\n\n        rowList = [...tableBody.rows].sort((a, b) => {\n          const aElem = a.cells[index].innerText;\n          const bElem = b.cells[index].innerText;\n\n          return aElem.localeCompare(bElem);\n        });\n      } else if (prevClick === headCol.innerText) {\n        prevClick = '';\n\n        rowList.reverse();\n      }\n      break;\n\n    case 'Age':\n      if (prevClick !== headCol.innerText) {\n        prevClick = headCol.innerText;\n\n        rowList = [...tableBody.rows].sort((a, b) => {\n          const aElem = a.cells[index].innerText;\n          const bElem = b.cells[index].innerText;\n\n          return aElem - bElem;\n        });\n      } else if (prevClick === headCol.innerText) {\n        prevClick = '';\n\n        rowList.reverse();\n      }\n      break;\n\n    case 'Salary':\n      if (prevClick !== headCol.innerText) {\n        prevClick = headCol.innerText;\n\n        rowList = [...tableBody.rows].sort((a, b) => {\n          const aElem = getNumber(a.cells[index].innerText);\n          const bElem = getNumber(b.cells[index].innerText);\n\n          return aElem - bElem;\n        });\n      } else if (prevClick === headCol.innerText) {\n        prevClick = '';\n\n        rowList.reverse();\n      }\n      break;\n  }\n\n  for (const row of rowList) {\n    tableBody.append(row);\n  }\n});\n\n/* выделение только одной строки */\n\ntableBody.addEventListener('click', e => {\n  const activeRow = e.target.closest('tr');\n\n  [...tableBody.rows].forEach(row => {\n    row.classList.remove('active');\n  });\n\n  activeRow.classList.toggle('active');\n});\n\n/* создание и вставка формы для нового сотрудника */\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\n\nconst formInputs = `\n  <label>Name:\n    <input data-qa=\"name\" name=\"name\" type=\"text\" required>\n  </label>\n  <label>Position:\n    <input data-qa=\"position\" name=\"position\" type=\"text\" required>\n  </label>\n  <label>Office:\n    <select data-qa=\"office\" >\n      <option>Tokyo</option>\n      <option>Singapore</option>\n      <option>London</option>\n      <option>New York</option>\n      <option>Edinburgh</option>\n      <option>San Francisco</option>\n    </select>\n  </label>\n  <label>Age:\n    <input data-qa=\"age\" name=\"age\" type=\"text\" required>\n  </label>\n  <label>Salary:\n    <input data-qa=\"salary\" name=\"salary\" type=\"text\" required>\n  </label>\n  <button type=\"submit\">Save to table</button>\n`;\n\nform.insertAdjacentHTML('afterbegin', formInputs);\n\nbody.append(form);\n\n/* валидация данных формы и вставки их в общую таблицу */\n\nfunction deletePreviousMessage() {\n  document.querySelectorAll('.notification')\n    .forEach(message => message.remove());\n}\n\nform.addEventListener('submit', (e) => {\n  const sel = document.querySelector('select');\n\n  e.preventDefault();\n\n  const selectedValue = sel.value;\n\n  const data = new FormData(form);\n\n  data.append('office', selectedValue);\n\n  const [nameNewEmp, position, age, salary, office] = [...data.entries()];\n\n  let checkSum = 0;\n\n  if (nameNewEmp[1].length < 4) {\n    deletePreviousMessage();\n\n    pushNotification(450, 10, 'ERROR',\n      'Имя должно сожержать более 4-х символов.', 'error');\n  } else {\n    checkSum++;\n  }\n\n  if (isNaN(+age[1])) {\n    deletePreviousMessage();\n\n    pushNotification(600, 10, 'ERROR',\n      'Введите Ваш возраст в числовом формате.', 'error');\n  } else if (+age[1] < 18 || +age[1] > 90) {\n    deletePreviousMessage();\n\n    pushNotification(600, 10, 'ERROR',\n      'Ваш возраст должен быть от 18 до 90 лет.', 'error');\n  } else {\n    checkSum++;\n  }\n\n  if (isNaN(+salary[1])) {\n    deletePreviousMessage();\n\n    pushNotification(750, 10, 'ERROR',\n      'Введите Вашу заработную плату в числовом формате.', 'error');\n  } else {\n    salary[1] = '$' + new Intl.NumberFormat('en-EN').format(+salary[1]);\n    checkSum++;\n  }\n\n  if (checkSum >= 3) {\n    deletePreviousMessage();\n\n    pushNotification(450, 10, 'SUCCESS', 'Это успешный УСПЕХ', 'success');\n\n    const newEmployeeRow = document.createElement('tr');\n\n    newEmployeeRow.innerHTML = `\n      <td>${nameNewEmp[1]}</td>\n      <td>${position[1]}</td>\n      <td>${office[1]}</td>\n      <td>${age[1]}</td>\n      <td>${salary[1]}</td>\n    `;\n    tableBody.insertAdjacentElement('beforeend', newEmployeeRow);\n  }\n});\n\n/* редактирование таблицы */\n\nfunction dataValidator(columnHeader, newValueFromInput, targetCell, cellInput) {\n  switch (columnHeader.innerText) {\n    case 'Name':\n      if (!(/([\\d])/g).test(newValueFromInput)\n          && newValueFromInput.length >= 4) {\n        targetCell.innerText = newValueFromInput;\n        cellInput.remove();\n        deletePreviousMessage();\n      } else {\n        deletePreviousMessage();\n\n        pushNotification(450, 10, 'ERROR',\n          'Вводимые данны должны быть СТРОКОЙ \\n '\n            + 'и содержать более 4-х символов', 'error');\n      }\n      break;\n    case 'Position':\n    case 'Office':\n      if ((/[A-Za-z]/g).test(newValueFromInput)) {\n        targetCell.innerText = newValueFromInput;\n        cellInput.remove();\n        deletePreviousMessage();\n      } else if (!(/[A-Za-z]/g).test(newValueFromInput)) {\n        deletePreviousMessage();\n\n        pushNotification(450, 10, 'ERROR',\n          'Вводимые данны должны быть СТРОКОЙ.', 'error');\n      }\n      break;\n\n    case 'Age':\n      if (!isNaN(+newValueFromInput)\n          && +newValueFromInput > 18 && +newValueFromInput < 90) {\n        targetCell.innerText = newValueFromInput;\n        cellInput.remove();\n        deletePreviousMessage();\n      } else if (isNaN(+newValueFromInput)) {\n        deletePreviousMessage();\n\n        pushNotification(600, 10, 'ERROR',\n          'Введите Ваш возраст в числовом формате.', 'error');\n      } else if (+newValueFromInput < 18 || +newValueFromInput > 90) {\n        deletePreviousMessage();\n\n        pushNotification(600, 10, 'ERROR',\n          'Ваш возраст должен быть от 18 до 90 лет.', 'error');\n      }\n      break;\n    case 'Salary':\n      if (isNaN(+newValueFromInput)) {\n        deletePreviousMessage();\n\n        pushNotification(750, 10, 'ERROR',\n          'Введите Вашу заработную плату в числовом формате.', 'error');\n      } else {\n        deletePreviousMessage();\n\n        targetCell.innerText = '$' + new Intl.NumberFormat('en-EN').format(\n          +newValueFromInput);\n      }\n      break;\n  }\n}\n\ntableBody.addEventListener('dblclick', (e) => {\n  const targetCell = e.target;\n  const prevTargetInner = targetCell.innerText;\n\n  const columnHeader\n    = [...document.querySelectorAll('th')][targetCell.cellIndex];\n\n  targetCell.innerText = '';\n\n  const cellInput = document.createElement('input');\n\n  cellInput.classList.add('cell-input');\n  targetCell.append(cellInput);\n  cellInput.value = prevTargetInner;\n\n  /* blur */\n\n  cellInput.addEventListener('blur', () => {\n    const newValueFromInput = cellInput.value.trim();\n\n    if (newValueFromInput.length <= 0) {\n      targetCell.innerText = prevTargetInner;\n    }\n    dataValidator(columnHeader, newValueFromInput, targetCell, cellInput);\n  });\n\n  /* keydown */\n\n  document.addEventListener('keydown', (ev) => {\n    const newValueFromInput = cellInput.value.trim();\n\n    if (ev.key === 'Enter' && newValueFromInput.length <= 0) {\n      targetCell.innerText = prevTargetInner;\n    } else if (ev.key === 'Enter' && newValueFromInput.length > 0) {\n      dataValidator(columnHeader, newValueFromInput, targetCell, cellInput);\n    }\n  });\n});\n"]}